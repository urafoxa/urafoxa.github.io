---
---
<!DOCTYPE html>
<html>
<body>

<h1>swaggy files</h1>

{% assign goodies = site.static_files
  | where_exp: "f", "f.path contains '/!!goodies/'"
  | sort: "path" %}

{% assign last_folder = "" %}
{% assign in_details = false %}

<h2>root</h2>
<ul>

{% for file in goodies %}
  {% assign parts = file.path | split: '/' %}
  {% assign depth = parts | size %}

  {% if depth == 3 %}
    {%- comment -%} /!!goodies/file.ext {%- endcomment -%}

    {% assign ext = file.extname | downcase %}
    {% if ext == "" %}
      {% assign icon = '/icons/comment.png' %}
    {% else %}
      {% case ext %}
        {% when '.ogg' or '.mp3' or '.wav' %}
          {% assign icon = '/icons/music.png' %}
        {% when '.mp4' or '.webm' %}
          {% assign icon = '/icons/film.png' %}
        {% when '.gif' or '.png' or '.jpg' %}
          {% assign icon = '/icons/image.png' %}
        {% else %}
          {% assign icon = '/icons/page_white.png' %}
      {% endcase %}
    {% endif %}

    <li>
      <img src="{{ icon }}" width="16" height="16">
      <a href="{{ file.path }}">{{ file.name }}</a>
    </li>

  {% else %}
    {%- comment -%} /!!goodies/folder/file.ext {%- endcomment -%}

    {% assign folder = parts[2] %}

    {% if folder != last_folder %}
      </ul>

      {% if in_details %}
        </details>
      {% endif %}

      <details>
        <summary>
          <img src="/icons/folder.png" width="16" height="16">
          {{ folder }}
        </summary>
        <ul>

      {% assign last_folder = folder %}
      {% assign in_details = true %}
    {% endif %}

    {% assign ext = file.extname | downcase %}
    {% if ext == "" %}
      {% assign icon = '/icons/comment.png' %}
    {% else %}
      {% case ext %}
        {% when '.ogg' or '.mp3' or '.wav' %}
          {% assign icon = '/icons/music.png' %}
        {% when '.mp4' or '.webm' %}
          {% assign icon = '/icons/film.png' %}
        {% when '.gif' or '.png' or '.jpg' %}
          {% assign icon = '/icons/image.png' %}
        {% else %}
          {% assign icon = '/icons/page_white.png' %}
      {% endcase %}
    {% endif %}

    <li>
      <img src="{{ icon }}" width="16" height="16">
      <a href="{{ file.path }}">{{ file.name }}</a>
    </li>

  {% endif %}
{% endfor %}

</ul>
{% if in_details %}
  </details>
{% endif %}

</ul>

</body>

<style>
details > summary {
  cursor: pointer;
  font-family: Tahoma, Verdana, sans-serif;
  font-weight: bold;
  margin: 4px 0;
}

details summary::-webkit-details-marker {
  display: none;
}

details summary::before {
  content: "▶ ";
}

details[open] summary::before {
  content: "▼ ";
}

ul {
  list-style: none;
  padding-left: 20px;
}
<\style>

</html>